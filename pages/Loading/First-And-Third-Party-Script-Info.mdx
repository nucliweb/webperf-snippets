import snippet from '../../snippets/Loading/First-And-Third-Party-Script-Info.js?raw'
import { Snippet } from '../../components/Snippet'

# First And Third Party Script Info

Analyzes all scripts loaded on the page, separating them into first-party (your domain) and third-party (external) scripts. This helps identify the performance impact of external dependencies.

**Why this matters:**

| Concern | First-Party | Third-Party |
|---------|-------------|-------------|
| **Control** | Full control over optimization | Limited or no control |
| **Reliability** | Depends on your infrastructure | External point of failure |
| **Performance** | Can be optimized, bundled, cached | Often unoptimized, may block rendering |
| **Privacy** | Your data policies | May collect user data |
| **Security** | Your responsibility | Potential vulnerability vector |

**Common third-party script issues:**

- Block main thread during execution
- Add DNS lookups and connection overhead
- May load additional scripts (script chains)
- Often not cached effectively
- Can delay Time to Interactive (TTI)

> **Related:** Use the [Find render-blocking resources](/Loading/Find-render-blocking-resources) snippet to identify scripts blocking initial render.

### Snippet

<Snippet code={snippet} />

### Understanding the Results

**Overall Summary:**
- Total script count with first/third-party breakdown
- Warning if third-party scripts outnumber first-party

**First-Party Scripts:**
- Scripts from your domain and subdomains (auto-detected)
- Total size and render-blocking count

**Third-Party Scripts:**
- Scripts from external domains
- Grouped by host to identify heavy dependencies
- Total size, render-blocking count, unique hosts

**For each script:**

| Field | Description |
|-------|-------------|
| Script | Filename |
| Host | Domain serving the script |
| Size | Transfer size (compressed) |
| Duration | Total time to load |
| Blocking | Whether it blocks rendering |

### How First-Party Detection Works

The snippet automatically detects first-party scripts by comparing root domains:

| Page Domain | Script Host | Detected As |
|-------------|-------------|-------------|
| `example.com` | `example.com` | First-party |
| `example.com` | `cdn.example.com` | First-party |
| `example.com` | `assets.example.com` | First-party |
| `example.com` | `google-analytics.com` | Third-party |
| `shop.example.co.uk` | `cdn.example.co.uk` | First-party |

### Common Third-Party Script Categories

| Category | Examples | Typical Impact |
|----------|----------|----------------|
| Analytics | Google Analytics, Segment, Mixpanel | 20-50 KB, often async |
| Advertising | Google Ads, Facebook Pixel | 50-200 KB, may chain-load |
| Tag Managers | GTM, Tealium | 30-80 KB, loads additional scripts |
| Social | Facebook SDK, Twitter widgets | 100-300 KB, heavy |
| Chat/Support | Intercom, Zendesk, Drift | 100-500 KB, often deferred |
| A/B Testing | Optimizely, VWO | 50-150 KB, often blocking |

### Further Reading

- [Loading Third-Party JavaScript](https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/loading-third-party-javascript) | Google Developers
- [Best practices for third-party scripts](https://web.dev/articles/optimizing-content-efficiency-loading-third-party-javascript) | web.dev
- [PerformanceResourceTiming API](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceResourceTiming) | MDN
- [Using the Resource Timing API](https://developer.mozilla.org/en-US/docs/Web/API/Resource_Timing_API/Using_the_Resource_Timing_API#coping_with_cors) | MDN
